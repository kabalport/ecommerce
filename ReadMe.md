# `e-커머스 상품 주문 서비스`

# 마일스톤
- ~~요구사항분석~~
- 플로우차트=> 머메이드로 수정 04.05
- 시퀀스다이어그램=> 머메이드로 수정 04.05
- erd => 머메이드로 수정 04.05
- Mockapi 04.05

# 요구사항 분석
### 유스케이스
- 포인트 조회
- 포인트 충전
### 다이어그램(플로우차트,시퀀스다이어그램)
포인트 조회
```mermaid
flowchart TD
  조회[사용자 포인트 조회] --> 조회결과{조회 결과 확인}
  조회결과 -- "포인트 정보 있음" --> 반환[사용자 포인트 정보 반환]
  조회결과 -- "포인트 정보 없음" --> 생성[빈 포인트 정보 생성]
  생성 --> 반환
```
```mermaid
sequenceDiagram
    participant 클라이언트
    participant 서버
    participant 데이터베이스

    클라이언트->>+서버: 멤버 ID로 포인트 조회 요청
    서버->>+데이터베이스: 멤버 ID로 사용자 포인트 조회
    데이터베이스-->>-서버:  반환
```
포인트충전
```mermaid
flowchart TD
    포인트충전(포인트충전) --> 포인트계산{"포인트 계산"}
    포인트계산 --> 포인트갱신[포인트 갱신]
```
## 요구사항분석
### 포인트
- [포인트 충전] 사용자 식별자 및 충전할 금액을 받아 포인트를 충전합니다.
- [포인트 조회] 사용자 식별자를 통해 해당 사용자의 포인트를 조회합니다.
- [포인트 사용] 사용자 식별자 및 사용할 금액을 받아 포인트를 사용합니다.

### 상품
[상품조회]
- 이커머스 상품 정보 ( ID, 이름, 가격, 잔여수량 ) 을 조회합니다.
- 조회시점의 상품별 잔여수량이 정확하면 좋습니다.

### 주문
[상품주문]
- 사용자 식별자와 (상품 ID, 수량) 목록을 입력받아 주문하고 결제를 수행합니다.
- 사용자는 상품을 여러 개 선택해 주문할 수 있고, 미리 충전한 잔액을 이용합니다.
- 동시에 여러 주문이 들어올 경우, 유저의 보유 잔고에 대한 처리가 정확해야 합니다.
- 각 상품의 재고 관리가 정상적으로 이루어져 잘못된 주문이 발생하지 않도록 해야 합니다.

### 결제
[상품결제]
- 결제는 기 충전된 잔액을 기반으로 수행하며 성공할 시 잔액을 차감해야 합니다.
- 데이터 분석을 위해 결제 성공 시에 실시간으로 주문 정보를 데이터 플랫폼에 전송해야 합니다. 
- 데이터 플랫폼이 어플리케이션 `외부` 라는 가정만 지켜 작업해 주시면 됩니다
- 데이터 플랫폼으로의 전송 기능은 Mock API, Fake Module 등 다양한 방법으로 접근해 봅니다.

### 분석
[인기판매상품조회]
- 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공합니다.
- 통계 정보를 다루기 위한 기술적 고민을 충분히 해보도록 합니다.
- 상품 주문 내역을 통해 판매량이 가장 높은 상품을 추천합니다.

### 장바구니
[장바구니 목록보기]
- 사용자는 모든 장바구니 상품목록을 볼 수 있습니다.
[장바구니 추가]
- 사용자는 구매 이전에 관심 있는 상품들을 장바구니에 적재할 수 있습니다.
[장바구니 수정]
- 사용자는 장바구니에 상품을 추가 혹은 변경할 수 있습니다.
[장바구니 삭제]
- 시용자는 장바구니에 있는 상품들을 삭제할수 있습니다.






# 흐름도 &시퀀스다이어그램
![img.png](img.png)
![img_1.png](img_1.png)
![img_2.png](img_2.png)
![img_3.png](img_3.png)
![img_4.png](img_4.png)


# ERD
![img_5.png](img_5.png)


## API 설계
### 포인트
[포인트충전 API]
- 사용자의 포인트를 충전합니다.
- endpoint : patch /api/point/charge

[포인트조회 API]
- 사용자의 포인트를 조회합니다.
- endpoint : get /api/point/{memberId}

### 이커머스 상품
[상품 조회 API]
- 이커머스의 상품을 조회합니다.
- endpoint : get /api/product

### 주문
[주문 API]
- 상품을 주문 및 결제합니다.
- 상품이 결제가 되면 주문상태를 저장합니다.
- endpoint : post /api/order

### 결제
[결제 API]
- 상품을 결제요청합니다.
- endpoint : post /api/pay

### 통계
[인기 판매 상품 조회 API]
- endpoint : get /api/popular/product

### 장바구니
[장바구니 조회 API]
- 사용자의 장바구니 상품목록을 조회합니다.
- endpoint : get /api/cart
  [장바구니 수정 API]
- 사용자의 장바구니 상품을 수정합니다.
- endpoint : get /api/cart
  [장바구니 삭제 API]
- 사용자의 장바구니 상품을 삭제합니다.
- endpoint : get /api/cart
- Query Parameters: x
- Request Body:
```json
{
}
```
Response:
- 성공시
```json
{
}
```
- 실패시-조건
```json
{
}
```